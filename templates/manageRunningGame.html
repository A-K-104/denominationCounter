<!DOCTYPE html>
<html lang="en-US">
<head>
    <link rel="stylesheet" type="text/css" href="/static/styles/general.css">
    <link rel="stylesheet" type="text/css" href="/static/styles/login.css">
    <link rel="stylesheet" type="text/css" href="/static/styles/tables.css">
    <title class="title">Manage live game</title>
</head>
{% extends 'navigationBar.html'%}

{% block content %}

<body>
<h2 class="title">Game home page</h2>

<button onclick="redirectPage('run-game')">stop game</button>

<div class="section">
    <div class="container">
        <table class="statusTable">
            <tr>
                <th>team name</th>
                <th>team score</th>
            </tr>
            {%for team in teams%}
            <tr>
                <td>
                    <p style="color:{{team.color}};">
                        {{team.name}}</p>
                </td>
                <td>
                    <p id="{{team.id}}">0</p>
                </td>
            </tr>
            {%endfor%}
        </table>
    </div>
</div>
</body>
<script>
    window.onload = getGameScore;
    const interval = setInterval(getGameScore, 2000);

    function redirectPage(path) {
        location.assign(path + "/stop" + window.location.search)
    }

    function getGameScore() {
        fetch('/run-game/get-score' + window.location.search)
            .then((response) => {
                console.log(response)
                if (response.status === 200) {
                    response.json().then(data => {
                        for (let header in data) {
                            document.getElementById(header).innerText = data[header].toFixed(2)
                        }
                    });

                }
            })

    }
</script>

</html>
{% endblock %}